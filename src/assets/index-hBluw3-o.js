import{i as d,o as B,O as C,d as L,c as a,a0 as p,g as R,a2 as S,e as b,w as A,T as D,f as n,F as v,h as y,q as g,a as F,D as H,x as M}from"./index-BGwiQ_ZP.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O=u=>{const r=d(0),c=d(0),o=d(!1),i=l=>{l.preventDefault(),l.stopPropagation(),o.value=!0,r.value=l.clientX,c.value=l.clientY},s=()=>{o.value=!1};return B(()=>{u.value&&u.value.addEventListener("contextmenu",i),window.addEventListener("click",s,!0),window.addEventListener("contextmenu",s,!0)}),C(()=>{u.value&&u.value.removeEventListener("contextmenu",i),window.removeEventListener("click",s,!0),window.removeEventListener("contextmenu",s,!0)}),{x:r,y:c,isShow:o}},T=["onClick"],V=L({__name:"index",props:{menu:{default:()=>[]}},setup(u){const r=d(),c=d(),{x:o,y:i,isShow:s}=O(r),l=e=>{e.style.height="0"},x=e=>{var m;e.style.height="auto";const h=e.clientHeight,t=(m=r.value)==null?void 0:m.getBoundingClientRect(),f=o.value+e.clientWidth,_=i.value+e.clientHeight,w=f>t.width+(t==null?void 0:t.x)?"right":"left",E=_>t.height+(t==null?void 0:t.y)?"bottom":"top";e.style.top=E==="top"?i.value+"px":i.value-e.clientHeight+"px",e.style.left=w==="left"?o.value+"px":o.value-e.clientWidth+"px",e.style.height="0",requestAnimationFrame(()=>{e.style.height=`${h}px`,e.style.transition="height 0.3s ease"})},k=e=>{e.style.transition=""};return(e,h)=>(n(),a("div",{class:"context-menu",ref_key:"contextMenuRef",ref:r},[p(e.$slots,"default",{},void 0,!0),(n(),R(S,{to:"body"},[b(D,{onBeforeEnter:l,onEnter:x,onAfterEnter:k},{default:A(()=>[e.menu.length?(n(),a(v,{key:0},[g(s)?(n(),a("div",{key:0,ref_key:"menuRef",ref:c,class:"menu"},[F("ul",null,[(n(!0),a(v,null,H(e.menu,(t,f)=>(n(),a("li",{key:f,onClick:t.click},M(t.label),9,T))),128))])],512)):y("",!0)],64)):(n(),a(v,{key:1},[g(s)?(n(),a("div",{key:0,ref_key:"menuRef",ref:c,class:"menu"},[p(e.$slots,"overlay",{},void 0,!0)],512)):y("",!0)],64))]),_:3})]))],512))}}),W=N(V,[["__scopeId","data-v-f10d7ad8"]]);export{W as c};
