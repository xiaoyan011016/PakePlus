import{g as b,P as E}from"./splitpanes.es-BE3PDyrU.js";import $ from"./orgTree-BVmU2Phx.js";import{C as L}from"./index-Dmp49pi4.js";import{C as M}from"./index-DXr50enF.js";import{u as F}from"./useGetDictList-Ce8qcgxG.js";import{c as Q,d as V}from"./sysOrg-CYUW6V7f.js";import{_ as z}from"./edit-record-history-b6VxML3W.js";import{_ as U}from"./editOrg.vue_vue_type_script_setup_true_lang-B-sfWYPT.js";import{d as G,i as H,r as K,o as j,c,e as a,w as e,q as _,f as i,F as v,D as C,g as u,p as d,x as h,h as p,E as q,cs as J,ct as W,I as X}from"./index-BGwiQ_ZP.js";import{C as Y}from"./index-O9UFCIBE.js";import{I as Z}from"./index-BwLVAfvf.js";import{S as tt,a as et}from"./index-CKmLu0Sy.js";import{T as ot}from"./index-BZPc_wGj.js";import{B as at}from"./index-_DVN_kvK.js";import{_ as rt}from"./index-C3-0t2lO.js";import{_ as nt}from"./index-Dc3BwS3p.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sysTenant-CUNJZJDU.js";import"./index-BUzwvh4O.js";import"./index-BRrv4Ip6.js";import"./omit-HeMvMqzr.js";import"./List-163jSJPW.js";import"./index-Dn-jGRft.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./createRef-CUnV3TOs.js";import"./_getTag-BRywsnft.js";import"./zoom-CXqzwkKe.js";import"./devWarning-MTSIIkhh.js";import"./pickAttrs-DQvtcfDv.js";import"./eagerComputed-DIhAf9GU.js";import"./collapseMotion-D2RrGThV.js";import"./KeyCode-CYuXKwrG.js";import"./debounce-BUZtn0sP.js";import"./hasIn-B69yjgv2.js";import"./index-DzzgRnZQ.js";import"./vnode-BaoCyZaz.js";import"./index-4yq-Tlp0.js";import"./Col-DruUELZH.js";import"./responsiveObserve-ChmocN4c.js";import"./styleChecker-DfAMPleG.js";import"./index-DkgGzfF8.js";import"./index-BjablQaC.js";import"./slide-NWV3xR2G.js";import"./Dropdown-C4JaQ-9X.js";import"./useState-DblkWJ1i.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-DA2nm7bB.js";import"./isPlainObject-DJIrIqvg.js";import"./index-CGXbiuUf.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./compact-item-CDNQQAbH.js";import"./move-wLULaQ1Q.js";import"./useMemo-BMsKZuSN.js";import"./file-B2ejoaTr.js";import"./index-C0T18UR7.js";import"./index-ENtatNUe.js";import"./index-CT-EkvtY.js";import"./Checkbox-BZ1yw4ia.js";import"./index-Bp3RETpT.js";import"./index-CEnhULtM.js";import"./index-Bh7qAkTT.js";import"./useBreakpoint-CpQcD87b.js";import"./index-DQufTizB.js";import"./lodash-buJ1Dk2D.js";import"./index-Dpm5AXGB.js";import"./ActionButton-4KVVUbhX.js";import"./index-D7YtsyTb.js";import"./index-CrTOvIq5.js";const lt={class:"ss-org-container"},st={key:2,style:{cursor:"pointer"}},pt={key:3,class:"w-full"},mt=G({name:"sysOrg",__name:"index",setup(dt){const w=H(),t=K({queryForm:{},tableData:[],loading:!1,tenantId:void 0}),D=[{title:"序号",align:"center",customRender:({index:r})=>`${r+1}`,width:60},{title:"机构名称",dataIndex:"name",key:"name",align:"center",width:100},{title:"机构编码",dataIndex:"code",key:"code",align:"center",width:100,ellipsis:!0},{title:"级别",dataIndex:"level",key:"level",align:"center",width:70,ellipsis:!0},{title:"机构类型",dataIndex:"type",key:"type",align:"center",width:100,ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",align:"center",width:120},{title:"排序",dataIndex:"orderNo",key:"orderNo",align:"center",width:100},{title:"修改记录",dataIndex:"history",key:"history",align:"center",width:120},{title:"操作",align:"center",key:"operation",dataIndex:"operation",width:150,fixed:"right"}],O=async r=>{t.queryForm.id=r.id,t.queryForm.name=void 0,t.queryForm.code=void 0,t.queryForm.type=void 0,t.tenantId=r.tenantId,await f()},f=async()=>{const r=await Q(t.queryForm.id,t.queryForm.name,t.queryForm.code,t.queryForm.type);t.tableData=r.data.result??[];const o=k=>{for(let g=0;g<k.length;g++){const m=k[g];m.key=m.id,Array.isArray(m.children)&&m.children.length>0&&o(m.children),Array.isArray(m.children)&&m.children.length==0&&Reflect.deleteProperty(m,"children")}};o(t.tableData)},N=async()=>{var r;(r=w.value)==null||r.handleOpen({status:1,orderNo:100,tenantId:t.tenantId})},A=async()=>{t.queryForm={},await f()},R=r=>{},S=r=>{var o;(o=w.value)==null||o.handleOpen({...r})},B=async r=>{await V({id:r.id}),await f(),X("删除成功","success")};return j(async()=>{await f()}),(r,o)=>{const k=Z,g=rt,m=et,P=tt,x=Y,y=ot,I=at,T=nt;return i(),c("div",lt,[a(_(E),{class:"default-theme"},{default:e(()=>[a(_(b),{size:"20"},{default:e(()=>[a($,{onNodeClick:O})]),_:1}),a(_(b),{size:"80"},{default:e(()=>[a(x,{class:"mb-2"},{default:e(()=>[a(L,{model:t.queryForm,name:"menu-form",onQuery:f,onAdd:N,onReset:A},{default:e(()=>[a(g,{label:"机构名称",name:"name",class:"w-1/2.5"},{default:e(()=>[a(k,{value:t.queryForm.name,"onUpdate:value":o[0]||(o[0]=s=>t.queryForm.name=s)},null,8,["value"])]),_:1}),a(g,{label:"机构类型",name:"type",class:"w-1/3"},{default:e(()=>[a(P,{value:t.queryForm.type,"onUpdate:value":o[1]||(o[1]=s=>t.queryForm.type=s),placeholder:""},{default:e(()=>[(i(!0),c(v,null,C(_(F)("org_type"),s=>(i(),u(m,{key:s.value,value:s.value},{default:e(()=>[d(h(s.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),a(x,{class:"h-full sys-user-card-body"},{default:e(()=>[a(M,{columns:D,data:t.tableData,loading:t.loading,onChange:R},{bodyCell:e(({column:s,text:ut,record:n})=>[s.dataIndex=="type"?(i(!0),c(v,{key:0},C(_(F)("org_type"),l=>(i(),c(v,{key:l},[l.value==n.type&&n.type=="101"?(i(),u(y,{key:0,color:"pink"},{default:e(()=>[d(h(l.label),1)]),_:2},1024)):p("",!0),l.value==n.type&&n.type=="201"?(i(),u(y,{key:1,color:"red"},{default:e(()=>[d(h(l.label),1)]),_:2},1024)):p("",!0),l.value==n.type&&n.type=="301"?(i(),u(y,{key:2,color:"orange"},{default:e(()=>[d(h(l.label),1)]),_:2},1024)):p("",!0),l.value==n.type&&n.type=="401"?(i(),u(y,{key:3,color:"green"},{default:e(()=>[d(h(l.label),1)]),_:2},1024)):p("",!0),l.value==n.type&&n.type=="501"?(i(),u(y,{key:4,color:"cyan"},{default:e(()=>[d(h(l.label),1)]),_:2},1024)):p("",!0)],64))),128)):p("",!0),s.dataIndex=="status"?(i(),c(v,{key:1},[n.status==1?(i(),u(y,{key:0,color:"green"},{default:e(()=>o[2]||(o[2]=[d("启用")])),_:1})):p("",!0),n.status==2?(i(),u(y,{key:1,color:"red"},{default:e(()=>o[3]||(o[3]=[d("禁用")])),_:1})):p("",!0)],64)):p("",!0),s.dataIndex==="history"?(i(),c("div",st,[a(z,{row:n},null,8,["row"])])):p("",!0),s.dataIndex==="operation"?(i(),c("div",pt,[a(I,{icon:q(_(J)),ghost:"",type:"primary",class:"mr-1",onClick:l=>S(n)},{default:e(()=>o[4]||(o[4]=[d("编辑")])),_:2},1032,["icon","onClick"]),a(T,{title:"确定删除?",onConfirm:l=>B(n)},{default:e(()=>[a(I,{icon:q(_(W)),danger:""},{default:e(()=>o[5]||(o[5]=[d("删除")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])])):p("",!0)]),_:1},8,["data","loading"])]),_:1})]),_:1})]),_:1}),a(U,{ref_key:"editOrgRef",ref:w,orgData:t.tableData,onHandleQuery:f},null,8,["orgData"])])}}}),De=it(mt,[["__scopeId","data-v-51579756"]]);export{De as default};
