import{d as b,i as E,r as g,o as B,c as P,e,w as r,ag as A,f as D,q as i,U as u,am as f,a as w,S as I,p as U}from"./index-BGwiQ_ZP.js";import{s as q}from"./index-0n4paoV3.js";import{F,_ as N}from"./index-C3-0t2lO.js";import{I as S,a as k}from"./index-BwLVAfvf.js";import{B as R}from"./index-_DVN_kvK.js";import{_ as V,a as j}from"./index-4yq-Tlp0.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DzzgRnZQ.js";import"./_getTag-BRywsnft.js";import"./zoom-CXqzwkKe.js";import"./vnode-BaoCyZaz.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./hasIn-B69yjgv2.js";import"./isPlainObject-DJIrIqvg.js";import"./Col-DruUELZH.js";import"./responsiveObserve-ChmocN4c.js";import"./styleChecker-DfAMPleG.js";import"./devWarning-MTSIIkhh.js";import"./collapseMotion-D2RrGThV.js";import"./debounce-BUZtn0sP.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./compact-item-CDNQQAbH.js";import"./omit-HeMvMqzr.js";import"./index-Dn-jGRft.js";import"./useState-DblkWJ1i.js";const L=["src"],O=b({__name:"register",setup(T){const d=E(),t=g({account:"",password:"",confirmPassword:"",code:"",codeId:null,phone:"",realName:"",tenantId:null}),p=g({captchaImage:"",expirySeconds:0,codeId:"",tenantList:[]}),y=async()=>{var s;await((s=d.value)==null?void 0:s.validate()),Reflect.deleteProperty(t,"confirmPassword");const o=q.sm2.doEncrypt(t.password,"0484C7466D950E120E5ECE5DD85D0C90EAA85081A3A2BD7C57AE6DC822EFCCBD66620C67B0103FC8DD280E36C3B282977B722AAEC3C56518EDCEBAFB72C5A05312",1);t.password=o,console.log(t)},v=async(n,o)=>o===""?Promise.reject("Please input the password again"):o!==t.password?Promise.reject("Two inputs don't match!"):Promise.resolve(),c=async()=>{t.code="";let n=await A();p.captchaImage="data:text/html;base64,"+n.data.result.img,p.expirySeconds=n.data.result.expirySeconds,t.codeId=n.data.result.id};return B(async()=>{c()}),(n,o)=>{const s=S,l=N,m=k,_=j,C=V,h=R,x=F;return D(),P("div",null,[e(x,{ref_key:"registerFormRef",ref:d,class:"login",model:t,name:"register-form","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off"},{default:r(()=>[e(l,{class:"login__field",name:"account",rules:[{required:!0,message:"请输入账户!",trigger:"blur"}]},{default:r(()=>[e(s,{class:"login__input",value:t.account,"onUpdate:value":o[0]||(o[0]=a=>t.account=a),style:{width:"100%"},placeholder:"请输入账户"},{prefix:r(()=>[e(i(u),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),e(l,{class:"login__field",name:"phone",rules:[{required:!0,message:"请输入手机号!",trigger:"blur"}]},{default:r(()=>[e(s,{class:"login__input",value:t.phone,"onUpdate:value":o[1]||(o[1]=a=>t.phone=a),style:{width:"100%"},placeholder:"请输入手机号"},{prefix:r(()=>[e(i(u),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),e(l,{class:"login__field",name:"realName",rules:[{required:!0,message:"请输入姓名!",trigger:"blur"}]},{default:r(()=>[e(s,{class:"login__input",value:t.realName,"onUpdate:value":o[2]||(o[2]=a=>t.realName=a),style:{width:"100%"},placeholder:"请输入姓名"},{prefix:r(()=>[e(i(u),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),e(l,{class:"login__field",name:"password",rules:[{required:!0,message:"请输入密码!",trigger:"blur"}]},{default:r(()=>[e(m,{class:"login__input",value:t.password,"onUpdate:value":o[3]||(o[3]=a=>t.password=a),style:{width:"100%"},placeholder:"请输入密码"},{prefix:r(()=>[e(i(f),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),e(l,{class:"login__field",name:"confirmPassword",rules:[{required:!0,message:"请确认密码!",trigger:"blur"},{validator:v,trigger:"change"}]},{default:r(()=>[e(m,{class:"login__input",value:t.confirmPassword,"onUpdate:value":o[4]||(o[4]=a=>t.confirmPassword=a),style:{width:"100%"},placeholder:"请确认密码"},{prefix:r(()=>[e(i(f),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1},8,["rules"]),e(l,{class:"login__field",name:"code",rules:[{required:!0,message:"请输入验证码!",trigger:"blur"}]},{default:r(()=>[e(C,{gutter:16},{default:r(()=>[e(_,{span:12},{default:r(()=>[e(s,{class:"login__input",value:t.code,"onUpdate:value":o[5]||(o[5]=a=>t.code=a),style:{width:"100%"},placeholder:"请输入验证码",maxlength:4},null,8,["value"])]),_:1}),e(_,{span:12},{default:r(()=>[w("div",{class:I([p.expirySeconds>0?"login-content-code":"login-content-code-expired"]),onClick:c},[w("img",{class:"login-content-code-img",width:"130px",height:"38px",src:p.captchaImage,style:{cursor:"pointer"}},null,8,L)],2)]),_:1})]),_:1})]),_:1}),e(l,null,{default:r(()=>[e(h,{class:"login__submit",type:"primary",onClick:y},{default:r(()=>o[6]||(o[6]=[U(" 注册 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}}),ge=K(O,[["__scopeId","data-v-ea912d10"]]);export{ge as default};
