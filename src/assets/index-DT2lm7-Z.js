import{C as T}from"./index-Dmp49pi4.js";import{e as X,f as Y,g as Z,h as tt}from"./sysDict-C5DBvtAa.js";import{_ as F}from"./edit-record-history-b6VxML3W.js";import{_ as et}from"./editDictType.vue_vue_type_script_setup_true_lang-BDx6Am5B.js";import{d as at,u as ot,i as q,r as nt,o as it,c as m,e as n,w as o,f as s,h as u,F as g,g as p,p as r,E as _,q as D,cs as z,ct as R,I as $}from"./index-BGwiQ_ZP.js";import{A as st}from"./accountTypeEnum-CXq2fvvp.js";import{_ as lt}from"./editDictData.vue_vue_type_script_setup_true_lang-DBsK4VQC.js";import{C as rt}from"./index-O9UFCIBE.js";import{I as dt}from"./index-BwLVAfvf.js";import{T as mt}from"./index-BZPc_wGj.js";import{B as pt}from"./index-_DVN_kvK.js";import{_ as ut,a as ct}from"./index-4yq-Tlp0.js";import{_ as yt}from"./index-C3-0t2lO.js";import{_ as gt}from"./index-Bp3RETpT.js";import{_ as ft}from"./index-Dc3BwS3p.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ENtatNUe.js";import"./index-DzzgRnZQ.js";import"./_getTag-BRywsnft.js";import"./zoom-CXqzwkKe.js";import"./vnode-BaoCyZaz.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./omit-HeMvMqzr.js";import"./lodash-buJ1Dk2D.js";import"./index-Dpm5AXGB.js";import"./KeyCode-CYuXKwrG.js";import"./pickAttrs-DQvtcfDv.js";import"./styleChecker-DfAMPleG.js";import"./ActionButton-4KVVUbhX.js";import"./index-DQufTizB.js";import"./Checkbox-BZ1yw4ia.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./compact-item-CDNQQAbH.js";import"./index-CrTOvIq5.js";import"./isMobile-BbN7I0i_.js";import"./devWarning-MTSIIkhh.js";import"./index-DkgGzfF8.js";import"./index-BjablQaC.js";import"./collapseMotion-D2RrGThV.js";import"./slide-NWV3xR2G.js";import"./index-Dn-jGRft.js";import"./Dropdown-C4JaQ-9X.js";import"./useState-DblkWJ1i.js";import"./hasIn-B69yjgv2.js";import"./useMergedState-DA2nm7bB.js";import"./isPlainObject-DJIrIqvg.js";import"./Col-DruUELZH.js";import"./responsiveObserve-ChmocN4c.js";import"./debounce-BUZtn0sP.js";import"./eagerComputed-DIhAf9GU.js";import"./index-CEnhULtM.js";import"./index-Bh7qAkTT.js";import"./index-CKmLu0Sy.js";import"./index-CGXbiuUf.js";import"./createRef-CUnV3TOs.js";import"./move-wLULaQ1Q.js";import"./List-163jSJPW.js";import"./useMemo-BMsKZuSN.js";import"./useBreakpoint-CpQcD87b.js";import"./index-BRrv4Ip6.js";import"./index-CT-EkvtY.js";import"./index-C0T18UR7.js";import"./index-BUzwvh4O.js";const Dt={class:"sys-dict-container"},xt={key:3,style:{cursor:"pointer"}},kt={key:4,class:"w-full"},wt={key:2,style:{cursor:"pointer"}},bt={key:3,class:"w-full"},ht=at({name:"sysDict",__name:"index",setup(It){const N=ot(),x=q(),k=q(),e=nt({queryForm:{},queryDictDataParams:{},tableData:[],tableData2:[],loading:!1,loading2:!1,tableParams:{page:1,pageSize:50,total:0},tableDictDataParams:{page:1,pageSize:50,total:0},selectDict:{}}),O=[{title:"序号",align:"center",width:60,customRender:({index:a})=>`${a+1}`,fixed:"left"},{title:"字典名称",dataIndex:"name",key:"name",align:"center",width:150},{title:"字典编码",dataIndex:"code",key:"code",align:"center",width:150},{title:"系统内置",dataIndex:"sysFlag",key:"sysFlag",align:"center",width:80},{title:"租户字典",dataIndex:"isTenant",key:"isTenant",align:"center",width:80},{title:"排序",dataIndex:"orderNo",key:"orderNo",align:"center",width:80},{title:"状态",dataIndex:"status",key:"status",align:"center",width:80},{title:"修改记录",dataIndex:"history",key:"history",align:"center",width:150},{title:"操作",align:"center",key:"operation",dataIndex:"operation",width:200,fixed:"right"}],Q=[{title:"序号",align:"center",width:60,customRender:({index:a})=>`${a+1}`,fixed:"left"},{title:"显示文本",dataIndex:"label",key:"label",align:"center",width:150},{title:"字典值",dataIndex:"value",key:"value",align:"center",width:100},{title:"编码",dataIndex:"code",key:"code",align:"center",width:100},{title:"拓展数据",dataIndex:"extData",key:"extData",align:"center",width:100},{title:"排序",dataIndex:"orderNo",key:"orderNo",align:"center",width:80},{title:"状态",dataIndex:"status",key:"status",align:"center",width:80},{title:"修改记录",dataIndex:"history",key:"history",align:"center",width:150},{title:"操作",align:"center",key:"operation",dataIndex:"operation",width:200,fixed:"right"}],c=async()=>{e.loading=!0;const a=Object.assign({},e.queryForm,e.tableParams),t=await X(a);e.tableData=t.data.result.items??[],e.tableParams.total=t.data.result.total??0,e.loading=!1},E=async()=>{var a;(a=k.value)==null||a.handleOpen({sysFlag:2,status:1,orderNo:100})},A=async()=>{e.queryForm.name="",c()},B=async a=>{e.tableParams.page=a.current,e.tableParams.pageSize=a.pageSize,await c()},U=async a=>{e.tableDictDataParams.page=a.current,e.tableDictDataParams.pageSize=a.pageSize,await y()},M=async a=>{var t;(t=k.value)==null||t.handleOpen(a)},V=async a=>{await Y({id:a.id}),$("操作成功","success"),await c()},w=a=>{var t;return(t=a.code)!=null&&t.toLowerCase().endsWith("enum")?!1:(a==null?void 0:a.sysFlag)===2||N.state.userInfos.accountType===st.NUMBER_999},j=async a=>{e.selectDict=a,e.queryDictDataParams.dictTypeId=a.id,await y()},y=async()=>{e.loading2=!0;let a=Object.assign(e.queryDictDataParams,e.tableDictDataParams);const t=await Z(a);e.tableData2=t.data.result.items??[],e.tableDictDataParams.total=t.data.result.total??0,e.loading2=!1},H=async()=>{var a;(a=x.value)==null||a.handleOpen({status:1,orderNo:100,dictTypeId:e.queryDictDataParams.dictTypeId})},J=async a=>{var t;(t=x.value)==null||t.handleOpen(a)},L=async()=>{e.queryDictDataParams.label="",y()},W=async a=>{await tt({id:a.id}),$("操作成功","success"),await y()};return it(()=>{c()}),(a,t)=>{const h=dt,I=yt,d=mt,f=pt,P=ft,C=gt,v=rt,S=ct,G=ut;return s(),m("div",Dt,[n(G,{gutter:8,style:{width:"100%",height:"100%",flex:"1"}},{default:o(()=>[n(S,{span:12,xs:24,style:{display:"flex",height:"100%",flex:"1"}},{default:o(()=>[n(v,{title:"字典",class:"w-full"},{default:o(()=>[n(T,{class:"mb-2",model:e.queryForm,name:"menu-form",onQuery:c,onAdd:E,onReset:A},{default:o(()=>[n(I,{label:"名称",name:"name",class:"w-1/2.5"},{default:o(()=>[n(h,{value:e.queryForm.name,"onUpdate:value":t[0]||(t[0]=i=>e.queryForm.name=i)},null,8,["value"])]),_:1})]),_:1},8,["model"]),n(C,{columns:O,"data-source":e.tableData,scroll:{x:1200,y:500},pagination:{total:e.tableParams.total,current:e.tableParams.page,pageSize:e.tableParams.pageSize,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","5","10","20"],showTotal:i=>`总数: ${i}`},loading:e.loading,onChange:B,customRow:i=>({onClick:()=>{j(i)}})},{bodyCell:o(({column:i,text:K,record:l})=>[i.dataIndex==="sysFlag"?(s(),m(g,{key:0},[l.sysFlag==1?(s(),p(d,{key:0,color:"green"},{default:o(()=>t[2]||(t[2]=[r("是")])),_:1})):(s(),p(d,{key:1,color:"orange"},{default:o(()=>t[3]||(t[3]=[r("否")])),_:1}))],64)):u("",!0),i.dataIndex==="isTenant"?(s(),m(g,{key:1},[l.isTenant==1?(s(),p(d,{key:0,color:"green"},{default:o(()=>t[4]||(t[4]=[r("是")])),_:1})):(s(),p(d,{key:1,color:"orange"},{default:o(()=>t[5]||(t[5]=[r("否")])),_:1}))],64)):u("",!0),i.dataIndex==="status"?(s(),m(g,{key:2},[l.status==1?(s(),p(d,{key:0,color:"green"},{default:o(()=>t[6]||(t[6]=[r("启用")])),_:1})):(s(),p(d,{key:1,color:"orange"},{default:o(()=>t[7]||(t[7]=[r("禁用")])),_:1}))],64)):u("",!0),i.dataIndex==="history"?(s(),m("div",xt,[n(F,{row:l},null,8,["row"])])):u("",!0),i.dataIndex==="operation"?(s(),m("div",kt,[n(f,{icon:_(D(z)),ghost:"",type:"primary",class:"mr-1",onClick:b=>M(l),disabled:!w(l)},{default:o(()=>t[8]||(t[8]=[r(" 编辑 ")])),_:2},1032,["icon","onClick","disabled"]),n(P,{title:"确定删除?",onConfirm:b=>V(l)},{default:o(()=>[n(f,{icon:_(D(R)),danger:"",disabled:l.sysFlag===1||!w(l)},{default:o(()=>t[9]||(t[9]=[r("删除")])),_:2},1032,["icon","disabled"])]),_:2},1032,["onConfirm"])])):u("",!0)]),_:1},8,["data-source","pagination","loading","customRow"])]),_:1})]),_:1}),n(S,{span:12,xs:24,style:{display:"flex",height:"100%",flex:"1"}},{default:o(()=>[n(v,{title:"字典值",class:"w-full"},{default:o(()=>[n(T,{class:"mb-2",model:e.queryDictDataParams,name:"menu-form",onQuery:y,onAdd:H,onReset:L},{default:o(()=>[n(I,{label:"显示文本",name:"label",class:"w-1/2.5"},{default:o(()=>[n(h,{value:e.queryDictDataParams.label,"onUpdate:value":t[1]||(t[1]=i=>e.queryDictDataParams.label=i)},null,8,["value"])]),_:1})]),_:1},8,["model"]),n(C,{columns:Q,"data-source":e.tableData2,scroll:{x:1200,y:500},pagination:{total:e.tableDictDataParams.total,current:e.tableDictDataParams.page,pageSize:e.tableDictDataParams.pageSize,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","5","10","20"],showTotal:i=>`总数: ${i}`},loading:e.loading2,onChange:U},{bodyCell:o(({column:i,text:K,record:l})=>[i.dataIndex==="extData"?(s(),m(g,{key:0},[l.extData==null||l.extData==""?(s(),p(d,{key:0,color:"orange"},{default:o(()=>t[10]||(t[10]=[r("空")])),_:1})):(s(),p(d,{key:1,color:"green"},{default:o(()=>t[11]||(t[11]=[r("有值")])),_:1}))],64)):u("",!0),i.dataIndex==="status"?(s(),m(g,{key:1},[l.status==1?(s(),p(d,{key:0,color:"green"},{default:o(()=>t[12]||(t[12]=[r("启用")])),_:1})):(s(),p(d,{key:1,color:"orange"},{default:o(()=>t[13]||(t[13]=[r("禁用")])),_:1}))],64)):u("",!0),i.dataIndex==="history"?(s(),m("div",wt,[n(F,{row:l},null,8,["row"])])):u("",!0),i.dataIndex==="operation"?(s(),m("div",bt,[n(f,{icon:_(D(z)),ghost:"",type:"primary",class:"mr-1",onClick:b=>J(l)},{default:o(()=>t[14]||(t[14]=[r(" 编辑 ")])),_:2},1032,["icon","onClick"]),n(P,{title:"确定删除?",onConfirm:b=>W(l)},{default:o(()=>[n(f,{icon:_(D(R)),danger:"",disabled:!w(e.selectDict)},{default:o(()=>t[15]||(t[15]=[r("删除")])),_:1},8,["icon","disabled"])]),_:2},1032,["onConfirm"])])):u("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1})]),_:1})]),_:1}),n(et,{ref_key:"editDictTypeRef",ref:k,onHandleQuery:c},null,512),n(lt,{ref_key:"edtiDictDataRef",ref:x,onHandleQuery:y},null,512)])}}}),Ne=_t(ht,[["__scopeId","data-v-6f2b5383"]]);export{Ne as default};
