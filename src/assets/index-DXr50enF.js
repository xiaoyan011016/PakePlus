import{d as $,Z as z,s as I,i as v,r as j,a1 as U,o as q,c as f,f as m,h as Z,e as o,a as c,E as d,q as p,P as G,w as n,p as u,cv as J,cw as K,cx as Q,cy as W,F as X,D as Y,g as ee,x as te,a0 as ne,cz as oe,cA as ae,ae as le,I as y}from"./index-BGwiQ_ZP.js";import{e as se}from"./file-B2ejoaTr.js";import{B as ce}from"./index-_DVN_kvK.js";import{D as ie}from"./index-C0T18UR7.js";import{M as re,a as de}from"./index-BjablQaC.js";import{_ as pe}from"./index-ENtatNUe.js";import{C as ue,_ as me}from"./index-CT-EkvtY.js";import{_ as _e}from"./index-DzzgRnZQ.js";import{_ as fe}from"./index-Bp3RETpT.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={key:0,class:"mb-2 flex w-full justify-between items-center"},ke={class:"left"},Ce={class:"right"},be={class:"setting-popover"},ve=$({__name:"index",props:{columns:{},data:{},bordered:{type:Boolean,default:!0},pagination:{type:[Boolean,Object],default:!1},loading:{type:Boolean,default:!1},showTableOpt:{type:Boolean,default:!1},colsCheckList:{default:[]},exportFileName:{}},emits:["change","add","print","colsChecked"],setup(w,{emit:L}){const i=L,l=w,x=z(),{themeConfig:T}=I(x),_=v(),B=v(550),a=j({checkedList:l.colsCheckList.map(e=>e.key),checkAll:!0,indeterminate:!1}),A=e=>{a.checkedList=e.target.checked?l.colsCheckList.map(t=>t.key):[],a.indeterminate=!1,i("colsChecked",a.checkedList)},O=e=>{i("colsChecked",e)};U(()=>a.checkedList,e=>{a.indeterminate=!!e.length&&e.length<l.colsCheckList.length,a.checkAll=e.length===l.colsCheckList.length});const h=()=>{le(()=>{var e;if(_.value){const t=((e=_.value.parentElement)==null?void 0:e.clientHeight)||0;B.value=t-500}})},D=e=>{i("change",e)},g=()=>{i("add")},E=()=>{i("print")},N=()=>{if(a.checkedList.length==0){y("请选择导出列,操作列不会被导出","warning");return}F(l.data)},P=()=>{},F=e=>{if(e.length<=0){y("没有数据可导出","warning");return}se(e,l.exportFileName?l.exportFileName:`${T.value.globalTitle}_${new Date().toLocaleString()}`,l.colsCheckList.filter(t=>a.checkedList.includes(t.key)),"导出数据")};return q(()=>{h(),window.addEventListener("resize",h)}),(e,t)=>{const r=ce,k=_e,C=de,R=re,S=ie,b=ue,H=me,M=pe,V=fe;return m(),f("div",{class:"common-table",ref_key:"tableRef",ref:_},[e.showTableOpt?(m(),f("header",ge,[c("div",ke,[o(r,{class:"ml-1",onClick:g,icon:d(p(G))},{default:n(()=>t[2]||(t[2]=[u(" 新增 ")])),_:1},8,["icon"])]),c("div",Ce,[o(k,{placement:"top"},{title:n(()=>t[3]||(t[3]=[c("span",null,"刷新",-1)])),default:n(()=>[o(r,{class:"ml-1",onClick:g,icon:d(p(J))},null,8,["icon"])]),_:1}),o(S,null,{overlay:n(()=>[o(R,null,{default:n(()=>[o(C,{key:"1",onClick:N},{default:n(()=>t[4]||(t[4]=[u(" 导出本页数据 ")])),_:1}),o(C,{key:"2",onClick:P},{default:n(()=>t[5]||(t[5]=[u(" 导出全部数据 ")])),_:1})]),_:1})]),default:n(()=>[o(r,{class:"ml-1",icon:d(p(K))},null,8,["icon"])]),_:1}),o(k,{placement:"top"},{title:n(()=>t[6]||(t[6]=[c("span",null,"打印",-1)])),default:n(()=>[o(r,{class:"ml-1",onClick:E,icon:d(p(Q))},null,8,["icon"])]),_:1}),o(M,{placement:"top",trigger:"click","arrow-point-at-center":!0},{content:n(()=>[c("div",be,[o(b,{checked:a.checkAll,"onUpdate:checked":t[0]||(t[0]=s=>a.checkAll=s),indeterminate:a.indeterminate,onChange:A},{default:n(()=>t[7]||(t[7]=[u(" 全选 ")])),_:1},8,["checked","indeterminate"]),t[8]||(t[8]=c("div",{class:"divider"},null,-1)),o(H,{value:a.checkedList,"onUpdate:value":t[1]||(t[1]=s=>a.checkedList=s),onChange:O},{default:n(()=>[(m(!0),f(X,null,Y(l.colsCheckList,s=>(m(),ee(b,{key:s.dataIndex,value:s.key},{default:n(()=>[u(te(s.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),default:n(()=>[o(r,{class:"ml-1",icon:d(p(W))},null,8,["icon"])]),_:1})])])):Z("",!0),o(V,{columns:e.columns,"data-source":e.data,bordered:e.bordered,scroll:{y:500,x:1300},pagination:e.pagination,loading:e.loading,onChange:D},{bodyCell:n(s=>[ne(e.$slots,"bodyCell",oe(ae(s)),void 0,!0)]),_:3},8,["columns","data-source","bordered","pagination","loading"])],512)}}}),Ne=he(ve,[["__scopeId","data-v-4353d100"]]);export{Ne as C};
