import{u as A}from"./useGetDictList-Ce8qcgxG.js";import{c as N}from"./sysPos-BbYKGNVi.js";import{i as q}from"./sysRole-B9nNQdEO.js";import{c as C}from"./sysOrg-CYUW6V7f.js";import{a7 as i,d as M,i as L,r as E,o as F,c as m,e as t,w as o,cE as B,f as d,F as _,D as g,q as G,g as c,p as S,x as v,I as J}from"./index-BGwiQ_ZP.js";import{l as Q}from"./lodash-buJ1Dk2D.js";import{M as V}from"./index-Dpm5AXGB.js";import{F as X,_ as Y}from"./index-C3-0t2lO.js";import{I as $,_ as j}from"./index-BwLVAfvf.js";import{S as z,a as H}from"./index-CKmLu0Sy.js";import{_ as K,a as Z}from"./index-4yq-Tlp0.js";import{_ as ee}from"./index-D7YtsyTb.js";import{_ as ae}from"./index-CrTOvIq5.js";const ve=s=>i({url:"/api/sysUserRegWay/list",method:"POST",data:s}),te=s=>i({method:"POST",url:"/api/sysUserRegWay/add",data:s}),oe=s=>i({method:"POST",url:"/api/sysUserRegWay/update",data:s}),ye=s=>i({method:"POST",url:"/api/sysUserRegWay/delete",data:s}),re={class:"sys-user-reg-way-edit-modal relative",ref:"editAddModal"},be=M({__name:"editRegWay",emits:["handleQuery"],setup(s,{expose:x,emit:D}){const w=D,y=L(),e=E({isShow:!1,formState:{},posData:[],roleData:[],orgData:[],loading:!0,submitData:{}}),h=async()=>{var l;await((l=y.value)==null?void 0:l.validate()),e.submitData=Q.cloneDeep(e.formState),Array.isArray(e.submitData.orgId)&&e.submitData.orgId.length>0&&(e.submitData.orgId=e.submitData.orgId[e.submitData.orgId.length-1]),e.submitData.id!=null&&e.submitData.id>0?await oe(e.submitData):await te(e.submitData),J("操作成功","success"),w("handleQuery"),b()},b=()=>{e.isShow=!1,e.formState={}},I=l=>{e.isShow=!0,e.formState=JSON.parse(JSON.stringify(l)),e.formState.orgId=B(e.orgData,l.orgId)};return F(async()=>{e.loading=!0;let l=await N();e.posData=l.data.result,l=await q(),e.roleData=l.data.result,l=await C(0),e.orgData=l.data.result,e.loading=!1}),x({handleOpen:I}),(l,r)=>{const U=$,n=Y,u=Z,p=H,f=z,R=ee,O=ae,k=j,P=K,T=X,W=V;return d(),m("div",re,[t(W,{open:e.isShow,"onUpdate:open":r[7]||(r[7]=a=>e.isShow=a),width:"700px",wrapClassName:"custom-modal",bodyStyle:{height:"400px",overflowY:"overlay",overflowX:"hidden",paddingRight:"6px"},title:e.formState.id!=null&&e.formState.id>0?"编辑注册方案":"添加注册方案",cancelText:"取消",okText:"确定",getContainer:()=>l.$refs.editAddModal,onOk:h,onCancel:b},{default:o(()=>[t(T,{ref_key:"formRef",ref:y,model:e.formState,name:"role-edit-form",autocomplete:"off","label-col":{span:3},"wrapper-col":{span:21}},{default:o(()=>[t(P,null,{default:o(()=>[t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"方案名称",name:"name",rules:[{required:!0,message:"方案名称不能为空",trigger:"blur"}]},{default:o(()=>[t(U,{value:e.formState.name,"onUpdate:value":r[0]||(r[0]=a=>e.formState.name=a)},null,8,["value"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"账户类型",name:"accountType",rules:[{required:!0,message:"账户类型不能为空",trigger:"blur"}]},{default:o(()=>[t(f,{value:e.formState.accountType,"onUpdate:value":r[1]||(r[1]=a=>e.formState.accountType=a),placeholder:""},{default:o(()=>[(d(!0),m(_,null,g(G(A)("AccountTypeEnum").filter(a=>!["SuperAdmin","SysAdmin"].includes(a.code)),a=>(d(),c(p,{key:a.value,value:a.value},{default:o(()=>[S(v(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"绑定角色",name:"roleId",rules:[{required:!0,message:"角色不能为空",trigger:"blur"}]},{default:o(()=>[t(f,{value:e.formState.roleId,"onUpdate:value":r[2]||(r[2]=a=>e.formState.roleId=a),placeholder:""},{default:o(()=>[(d(!0),m(_,null,g(e.roleData,a=>(d(),c(p,{value:a.id},{default:o(()=>[S(v(a.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"绑定机构",name:"orgId",rules:[{required:!0,message:"机构不能为空",trigger:"blur"}]},{default:o(()=>[t(R,{value:e.formState.orgId,"onUpdate:value":r[3]||(r[3]=a=>e.formState.orgId=a),options:e.orgData,placeholder:"","field-names":{label:"name",value:"id",children:"children"},changeOnSelect:!0},null,8,["value","options"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"绑定职位",name:"posId",rules:[{required:!0,message:"职位不能为空",trigger:"blur"}]},{default:o(()=>[t(f,{value:e.formState.posId,"onUpdate:value":r[4]||(r[4]=a=>e.formState.posId=a),placeholder:""},{default:o(()=>[(d(!0),m(_,null,g(e.posData,a=>(d(),c(p,{value:a.id},{default:o(()=>[S(v(a.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"排序",name:"orderNo"},{default:o(()=>[t(O,{class:"w-full",value:e.formState.orderNo,"onUpdate:value":r[5]||(r[5]=a=>e.formState.orderNo=a),placeholder:"排序"},null,8,["value"])]),_:1})]),_:1}),t(u,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(n,{label:"备注",name:"remark"},{default:o(()=>[t(k,{rows:2,value:e.formState.remark,"onUpdate:value":r[6]||(r[6]=a=>e.formState.remark=a)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","getContainer"])],512)}}});export{be as _,ve as a,ye as b};
