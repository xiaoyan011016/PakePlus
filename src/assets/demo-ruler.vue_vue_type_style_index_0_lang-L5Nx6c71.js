import{d as U,i as a,r as C,j as d,c as f,a as e,x as W,v as r,p as q,g as F,w as b,q as x,Q as y,S as Q,f as p}from"./index-BGwiQ_ZP.js";import{f as G}from"./style-BA2H1GC3.js";const J="/assets/bg-5l3SmAP9.png",K={class:"demo"},X={class:"top font16"},Y={class:"scale mr10"},ee=["value"],te=["value"],oe=["value"],ne=["src"],se={class:"btns"},ae=["onClick"],le=["onClick"],ie=["onClick"],he=U({__name:"demo-ruler",setup(ce){const k=a(1470),g=a(800),v=a(1e3),m=a(500),w=a(0);a(1);const l=a(),i=a(!0),u=C({maxScale:3,minScale:.3,disablePan:!1,disableZoom:!1,contain:"none",handleStartEvent:o=>{o.preventDefault(),console.log("handleStartEvent",o)}}),h=a(!1),c=a({h:[0,100,200],v:[130]}),S=()=>{l.value&&l.value.zoomOut()},B=()=>{i.value=!i.value},_=()=>{l.value&&l.value.reset()},z=()=>{n.isBlack=!n.isBlack,w.value++},n=C({scale:1,isBlack:!1,lines:{h:[0,250],v:[0,500]},thick:20,shadow:{x:0,y:0,width:300,height:300},isShowRuler:!0,isShowReferLine:!0}),R=d(()=>({width:`${k.value}px`,height:`${g.value}px`})),L=d(()=>n.isBlack?{bgColor:"transparent",hoverBg:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}:{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}),I=d(()=>Number(n.scale).toFixed(1)),M=d(()=>({width:`${v.value}px`,height:`${m.value}px`})),E=o=>{n.scale=o.target.value*1,l.value&&l.value.panzoomInstance.zoom(n.scale)},$=o=>{console.log("handleCornerClick",o)},j=o=>{console.log("zoomchange",o)},D=()=>{n.isShowReferLine=!n.isShowReferLine,console.log(n.isShowReferLine,"state.isShowReferLine")},N=o=>{const t=o.target.value.split(",");c.value.h=t.map(s=>Number(s))},O=o=>{const t=o.target.value.split(",");c.value.v=t.map(s=>Number(s))},P=o=>{u.disableZoom=o.target.checked},V=o=>{u.disablePan=o.target.checked},T=o=>{u.contain=o.target.checked?"inside":"none"},Z=()=>{n.shadow.x=Math.random()*v.value,n.shadow.y=Math.random()*m.value};return(o,t)=>(p(),f("div",K,[e("div",X,[e("div",Y," 缩放比:"+W(I.value),1),i.value?(p(),f("button",{key:0,class:"mr10 font16",onClick:t[0]||(t[0]=s=>i.value=!1)},"隐藏规尺")):(p(),f("button",{key:1,class:"mr10 font16",onClick:B},"显示规尺")),e("button",{class:"mr10 font16",onClick:D},"辅助线开关"),e("button",{class:"mr10 font16",onClick:t[1]||(t[1]=s=>h.value=!h.value)},"锁定参考线"),e("button",{class:"mr10 font16",onClick:Z},"模拟阴影切换"),e("button",{class:"mr10 font16",onClick:z},"主题切换"),e("button",{class:"mr10 font16",onClick:r(_,["stop"])},"还原"),e("button",{class:"mr10 font16",onClick:r(S,["stop"])},"缩小"),t[4]||(t[4]=e("span",null,"禁止缩放",-1)),e("input",{type:"checkbox",class:"switch",onChange:P},null,32),t[5]||(t[5]=e("span",null,"禁止移动",-1)),e("input",{type:"checkbox",class:"switch mr10",onChange:V},null,32),t[6]||(t[6]=e("span",null,"框内移动",-1)),e("input",{type:"checkbox",class:"switch mr10",onChange:T},null,32),e("input",{class:"mr10 font16",value:n.scale,type:"range",min:"0.3",max:"3",step:"0.1",defaultValue:"1",onInput:E},null,40,ee),t[7]||(t[7]=e("div",{class:"mr10"}," 吸附横线: ",-1)),e("input",{class:"mr10",style:{width:"90px"},value:c.value.h,onBlur:N},null,40,te),t[8]||(t[8]=e("div",{class:"mr10"}," 吸附纵线: ",-1)),e("input",{class:"mr10",style:{width:"90px"},value:c.value.v,onBlur:O},null,40,oe),t[9]||(t[9]=e("a",{href:"https://github.com/kakajun/vue3-sketch-ruler",target:"_blank",rel:"noopener noreferrer"},[e("i",{class:"fas fa-external-link-alt"}),q(" git源码 ")],-1))]),e("div",{class:Q(["wrapper",[n.isBlack?"balckwrapper":"whitewrapper"]]),style:y(R.value)},[(p(),F(x(G),{key:w.value,ref_key:"sketchruleRef",ref:l,scale:n.scale,"onUpdate:scale":t[2]||(t[2]=s=>n.scale=s),"lock-line":h.value,"onUpdate:lockLine":t[3]||(t[3]=s=>h.value=s),thick:n.thick,width:k.value,"show-ruler":i.value,height:g.value,palette:L.value,"snaps-obj":c.value,shadow:n.shadow,"canvas-width":v.value,"canvas-height":m.value,"panzoom-option":u,"is-show-refer-line":n.isShowReferLine,lines:n.lines,onOnCornerClick:$,onZoomchange:j},{default:b(()=>[e("div",{"data-type":"page",style:y(M.value)},[e("img",{class:"img-style",src:x(J),alt:""},null,8,ne)],4)]),btn:b(({reset:s,zoomIn:A,zoomOut:H})=>[e("div",se,[e("button",{onClick:r(s,["stop"])},"还原",8,ae),e("button",{onClick:r(A,["stop"])},"放大",8,le),e("button",{onClick:r(H,["stop"])},"缩小",8,ie)])]),_:1},8,["scale","lock-line","thick","width","show-ruler","height","palette","snaps-obj","shadow","canvas-width","canvas-height","panzoom-option","is-show-refer-line","lines"]))],6)]))}});export{he as _};
