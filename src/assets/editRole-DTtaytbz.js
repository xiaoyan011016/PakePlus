import{d as O,i as c,r as A,c as m,e as a,w as s,cI as E,f as i,p as y,x as S,I as g,C as G}from"./index-BGwiQ_ZP.js";import{c as L,d as T,e as V}from"./sysRole-B9nNQdEO.js";import{l as q}from"./lodash-buJ1Dk2D.js";import{M as B}from"./index-Dpm5AXGB.js";import{F,_ as J}from"./index-C3-0t2lO.js";import{S as P}from"./index-CEnhULtM.js";import{I as Q,_ as $}from"./index-BwLVAfvf.js";import{_ as X,R as Y}from"./index-DQufTizB.js";import{_ as j,a as z}from"./index-4yq-Tlp0.js";import{_ as H}from"./index-CrTOvIq5.js";import{_ as W}from"./index-BUzwvh4O.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./KeyCode-CYuXKwrG.js";import"./omit-HeMvMqzr.js";import"./pickAttrs-DQvtcfDv.js";import"./zoom-CXqzwkKe.js";import"./_getTag-BRywsnft.js";import"./index-_DVN_kvK.js";import"./useState-DblkWJ1i.js";import"./devWarning-MTSIIkhh.js";import"./compact-item-CDNQQAbH.js";import"./styleChecker-DfAMPleG.js";import"./ActionButton-4KVVUbhX.js";import"./vnode-BaoCyZaz.js";import"./index-DzzgRnZQ.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./hasIn-B69yjgv2.js";import"./isPlainObject-DJIrIqvg.js";import"./Col-DruUELZH.js";import"./responsiveObserve-ChmocN4c.js";import"./collapseMotion-D2RrGThV.js";import"./debounce-BUZtn0sP.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./index-Dn-jGRft.js";import"./Checkbox-BZ1yw4ia.js";import"./isMobile-BbN7I0i_.js";import"./index-BRrv4Ip6.js";import"./List-163jSJPW.js";import"./createRef-CUnV3TOs.js";import"./eagerComputed-DIhAf9GU.js";const ee={key:0},te={key:1,class:"button-node-wrapper"},ae=O({__name:"editRole",emits:["handleQuery"],setup(oe,{expose:x,emit:v}){const K=v,p=c(),k=c(),e=A({isShow:!1,formState:{},menuData:[],expandedKeys:[],selectedKeys:[],checkedKeys:[],loading:!0}),w=async()=>{var t;await((t=p.value)==null?void 0:t.validate());const n=q.cloneDeep(e.formState);n.menuIdList=e.checkedKeys,e.formState.id!=null&&e.formState.id>0?(await T(n),g("修改成功","success")):(await V(n),g("添加成功","success")),u(),K("handleQuery"),G.emit("posOrRoleUpdate")},u=async()=>{e.isShow=!1,e.formState={},e.menuData=[],e.expandedKeys=[],e.selectedKeys=[],e.checkedKeys=[]},_=n=>{n.forEach(t=>{var r,l;t.type!=3&&((r=e.expandedKeys)==null||r.push(t.id)),Array.isArray(t.children)&&((l=t.children)==null?void 0:l.length)>0&&_(t.children)})};return x({handleOpen:async n=>{var r;e.isShow=!0,e.loading=!0;let t=await E({tenantId:n.tenantId});e.menuData=t.data.result??[],_(e.menuData),e.formState=JSON.parse(JSON.stringify(n)),n.id!=null&&(t=await L(n.id),e.checkedKeys=t.data.result),e.loading=!1,(r=p.value)==null||r.clearValidate()}}),(n,t)=>{const r=Q,l=J,d=z,b=H,f=Y,h=X,R=$,U=W,C=j,D=P,I=F,M=B;return i(),m("div",{class:"sys-role-edit-modal relative",ref_key:"editAddModal",ref:k},[a(M,{open:e.isShow,"onUpdate:open":t[8]||(t[8]=o=>e.isShow=o),width:"700px",wrapClassName:"custom-modal",bodyStyle:{height:"500px",overflowY:"overlay",overflowX:"hidden",paddingRight:"6px"},title:e.formState.id!=null&&e.formState.id>0?"编辑角色":"添加角色",cancelText:"取消",okText:"确定",getContainer:()=>n.$refs.editAddModal,onOk:w,onCancel:u},{default:s(()=>[a(I,{ref_key:"formRef",ref:p,model:e.formState,name:"role-edit-form",autocomplete:"off","label-col":{span:6},"wrapper-col":{span:18}},{default:s(()=>[a(D,{spinning:e.loading},{default:s(()=>[a(C,null,{default:s(()=>[a(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:s(()=>[a(l,{label:"角色名称",name:"name","label-col":{span:3},"wrapper-col":{span:21},rules:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},{default:s(()=>[a(r,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=o=>e.formState.name=o)},null,8,["value"])]),_:1})]),_:1}),a(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:s(()=>[a(l,{label:"角色编码",name:"code","label-col":{span:3},"wrapper-col":{span:21},rules:[{required:!0,message:"角色编码不能为空",trigger:"blur"}]},{default:s(()=>[a(r,{value:e.formState.code,"onUpdate:value":t[1]||(t[1]=o=>e.formState.code=o),disabled:e.formState.id!=null&&e.formState.code=="sys_admin"},null,8,["value","disabled"])]),_:1})]),_:1}),a(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:s(()=>[a(l,{label:"排序",name:"orderNo"},{default:s(()=>[a(b,{class:"w-full",value:e.formState.orderNo,"onUpdate:value":t[2]||(t[2]=o=>e.formState.orderNo=o),placeholder:"排序"},null,8,["value"])]),_:1})]),_:1}),a(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:s(()=>[a(l,{label:"状态",name:"status"},{default:s(()=>[a(h,{value:e.formState.status,"onUpdate:value":t[3]||(t[3]=o=>e.formState.status=o)},{default:s(()=>[a(f,{value:1},{default:s(()=>t[9]||(t[9]=[y("启用")])),_:1}),a(f,{value:2},{default:s(()=>t[10]||(t[10]=[y("禁用")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:s(()=>[a(l,{label:"备注",name:"remark","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[a(R,{rows:2,value:e.formState.remark,"onUpdate:value":t[4]||(t[4]=o=>e.formState.remark=o)},null,8,["value"])]),_:1})]),_:1}),a(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:s(()=>[a(l,{label:"菜单权限","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[a(U,{expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":t[5]||(t[5]=o=>e.expandedKeys=o),selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":t[6]||(t[6]=o=>e.selectedKeys=o),checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":t[7]||(t[7]=o=>e.checkedKeys=o),checkable:"","tree-data":e.menuData,"field-names":{key:"id"}},{title:s(({title:o,key:ne,type:N})=>[N!=3?(i(),m("span",ee,S(o),1)):(i(),m("span",te,S(o),1))]),_:1},8,["expandedKeys","selectedKeys","checkedKeys","tree-data"])]),_:1})]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["model"])]),_:1},8,["open","title","getContainer"])],512)}}}),Xe=Z(ae,[["__scopeId","data-v-4d2d63b6"]]);export{Xe as default};
