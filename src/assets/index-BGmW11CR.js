import{_ as D}from"./edit-record-history-b6VxML3W.js";import{C as L}from"./index-Dmp49pi4.js";import{C as z}from"./index-DXr50enF.js";import{d as O,i as U,u as T,r as B,o as W,c as m,e as r,w as n,f as s,g as h,h as u,q as c,F as $,D as E,p as _,x as Q,E as v,cs as V,ct as A,I as M}from"./index-BGwiQ_ZP.js";import{a as j}from"./sysTenant-CUNJZJDU.js";import{a as G,_ as H,b as J}from"./editRegWay.vue_vue_type_script_setup_true_lang-CREIh0yO.js";import{C as K}from"./index-O9UFCIBE.js";import{S as X,a as Y}from"./index-CKmLu0Sy.js";import{I as Z}from"./index-BwLVAfvf.js";import{B as tt}from"./index-_DVN_kvK.js";import{_ as et}from"./index-C3-0t2lO.js";import{_ as at}from"./index-Dc3BwS3p.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-4yq-Tlp0.js";import"./Col-DruUELZH.js";import"./responsiveObserve-ChmocN4c.js";import"./styleChecker-DfAMPleG.js";import"./index-ENtatNUe.js";import"./index-DzzgRnZQ.js";import"./_getTag-BRywsnft.js";import"./zoom-CXqzwkKe.js";import"./vnode-BaoCyZaz.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./omit-HeMvMqzr.js";import"./file-B2ejoaTr.js";import"./index-C0T18UR7.js";import"./Dropdown-C4JaQ-9X.js";import"./move-wLULaQ1Q.js";import"./slide-NWV3xR2G.js";import"./index-Dn-jGRft.js";import"./devWarning-MTSIIkhh.js";import"./index-BjablQaC.js";import"./collapseMotion-D2RrGThV.js";import"./KeyCode-CYuXKwrG.js";import"./index-CT-EkvtY.js";import"./Checkbox-BZ1yw4ia.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./compact-item-CDNQQAbH.js";import"./index-BRrv4Ip6.js";import"./index-Bp3RETpT.js";import"./eagerComputed-DIhAf9GU.js";import"./useState-DblkWJ1i.js";import"./pickAttrs-DQvtcfDv.js";import"./index-CEnhULtM.js";import"./index-Bh7qAkTT.js";import"./useBreakpoint-CpQcD87b.js";import"./useMergedState-DA2nm7bB.js";import"./index-DQufTizB.js";import"./index-BUzwvh4O.js";import"./List-163jSJPW.js";import"./createRef-CUnV3TOs.js";import"./debounce-BUZtn0sP.js";import"./hasIn-B69yjgv2.js";import"./useGetDictList-Ce8qcgxG.js";import"./sysPos-BbYKGNVi.js";import"./sysRole-B9nNQdEO.js";import"./sysOrg-CYUW6V7f.js";import"./lodash-buJ1Dk2D.js";import"./index-Dpm5AXGB.js";import"./ActionButton-4KVVUbhX.js";import"./index-D7YtsyTb.js";import"./index-CGXbiuUf.js";import"./isMobile-BbN7I0i_.js";import"./index-CrTOvIq5.js";import"./index-DkgGzfF8.js";import"./isPlainObject-DJIrIqvg.js";import"./useMemo-BMsKZuSN.js";const rt={class:"sys-user-reg-way-container flex flex-col"},nt={key:0,style:{cursor:"pointer"}},it={key:1,class:"w-full"},st=O({name:"sysUserRegWay",__name:"index",setup(mt){const l=U(),y=T(),t=B({queryForm:{name:"",keyword:"",tenantId:void 0},tenantList:[],tableData:[],tableParams:{page:1,pageSize:50,total:0},loading:!1}),I=[{title:"序号",align:"center",width:60,customRender:({index:e})=>`${e+1}`,fixed:"left"},{title:"名称",dataIndex:"name",key:"name",align:"center",width:100},{title:"机构",dataIndex:"orgName",key:"orgName",align:"center",width:150},{title:"角色",dataIndex:"roleName",key:"roleName",align:"center",width:150},{title:"职位",dataIndex:"posName",key:"posName",align:"center",width:150},{title:"排序",dataIndex:"orderNo",key:"orderNo",align:"center",width:150},{title:"修改记录",dataIndex:"history",key:"history",align:"center",width:150},{title:"操作",align:"center",key:"operation",dataIndex:"operation",width:250,fixed:"right"}],i=async()=>{t.loading=!0;let e=Object.assign(t.queryForm,t.tableParams);const a=await G({...e});t.tableData=a.data.result,t.loading=!1},x=()=>{var e;(e=l.value)==null||e.handleOpen({tenantId:t.queryForm.tenantId,orderNo:100})},k=()=>{t.queryForm.name="",t.queryForm.keyword="",t.queryForm.tenantId=t.tenantList[0].value,i()},b=async e=>{await J({id:e.id}),M("删除成功","success"),await i()},F=e=>{var a;(a=l.value)==null||a.handleOpen(e)},C=async e=>{t.tableParams.page=e.current,t.tableParams.pageSize=e.pageSize,await i()};return W(async()=>{if(y.state.userInfos.accountType===999){const e=await j();t.tenantList=e.data.result,t.queryForm.tenantId=t.tenantList[0].value}await i()}),(e,a)=>{const q=Y,S=X,p=et,f=Z,g=K,N=D,w=tt,P=at;return s(),m("div",rt,[r(g,{class:"mb-2.5"},{default:n(()=>[r(L,{model:t.queryForm,name:"menu-form",onQuery:i,onAdd:x,onReset:k},{default:n(()=>[c(y).state.userInfos.accountType==999?(s(),h(p,{key:0,label:"租户",name:"tenantId",style:{width:"250px"}},{default:n(()=>[r(S,{value:t.queryForm.tenantId,"onUpdate:value":a[0]||(a[0]=o=>t.queryForm.tenantId=o),placeholder:""},{default:n(()=>[(s(!0),m($,null,E(t.tenantList,o=>(s(),h(q,{key:o.value,value:o.value},{default:n(()=>[_(Q(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):u("",!0),r(p,{label:"关键字",name:"keyword",class:"w-1/2.5"},{default:n(()=>[r(f,{value:t.queryForm.keyword,"onUpdate:value":a[1]||(a[1]=o=>t.queryForm.keyword=o)},null,8,["value"])]),_:1}),r(p,{label:"名称",name:"name",class:"w-1/2.5"},{default:n(()=>[r(f,{value:t.queryForm.name,"onUpdate:value":a[2]||(a[2]=o=>t.queryForm.name=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),r(g,{class:"flex-1 card-table"},{default:n(()=>[r(z,{columns:I,data:t.tableData,pagination:{total:t.tableParams.total,current:t.tableParams.page,pageSize:t.tableParams.pageSize,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","5","10","20"],showTotal:o=>`总数: ${o}`},loading:t.loading,onChange:C},{bodyCell:n(({column:o,text:lt,record:d})=>[o.dataIndex==="history"?(s(),m("div",nt,[r(N,{row:d},null,8,["row"])])):u("",!0),o.dataIndex==="operation"?(s(),m("div",it,[r(w,{icon:v(c(V)),ghost:"",type:"primary",class:"mr-1",onClick:R=>F(d)},{default:n(()=>a[3]||(a[3]=[_("编辑")])),_:2},1032,["icon","onClick"]),r(P,{title:"确定删除?",onConfirm:R=>b(d)},{default:n(()=>[r(w,{icon:v(c(A)),danger:""},{default:n(()=>a[4]||(a[4]=[_("删除")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])])):u("",!0)]),_:1},8,["data","pagination","loading"])]),_:1}),r(H,{ref_key:"editRegWayRef",ref:l,onHandleQuery:i},null,512)])}}}),be=ot(st,[["__scopeId","data-v-48913593"]]);export{be as default};
