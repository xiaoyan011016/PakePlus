import{C as N}from"./index-Dmp49pi4.js";import{C as R}from"./index-DXr50enF.js";import{d as T,i as B,r as E,o as Q,c as p,e as n,w as o,cI as U,f as r,F as v,D as F,g as u,p as s,x as I,q as k,h as y,E as h,cs as V,ct as G,cJ as H,I as K}from"./index-BGwiQ_ZP.js";import{a as P}from"./sysTenant-CUNJZJDU.js";import{_ as $}from"./edit-record-history-b6VxML3W.js";import j from"./editOrAddDialog-BKMwHygo.js";import{I as J}from"./index-D6J3dazT.js";import{u as z}from"./useGetDictList-Ce8qcgxG.js";import{C as W}from"./index-O9UFCIBE.js";import{S as X,a as Y}from"./index-CKmLu0Sy.js";import{I as Z}from"./index-BwLVAfvf.js";import{T as tt}from"./index-BZPc_wGj.js";import{B as et}from"./index-_DVN_kvK.js";import{_ as at}from"./index-C3-0t2lO.js";import{_ as ot}from"./index-Dc3BwS3p.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./file-B2ejoaTr.js";import"./index-C0T18UR7.js";import"./Dropdown-C4JaQ-9X.js";import"./index-DzzgRnZQ.js";import"./_getTag-BRywsnft.js";import"./zoom-CXqzwkKe.js";import"./vnode-BaoCyZaz.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./move-wLULaQ1Q.js";import"./slide-NWV3xR2G.js";import"./index-Dn-jGRft.js";import"./devWarning-MTSIIkhh.js";import"./omit-HeMvMqzr.js";import"./index-BjablQaC.js";import"./collapseMotion-D2RrGThV.js";import"./KeyCode-CYuXKwrG.js";import"./index-ENtatNUe.js";import"./index-CT-EkvtY.js";import"./Checkbox-BZ1yw4ia.js";import"./index-CalSw2eR.js";import"./css-DXc8wDa4.js";import"./compact-item-CDNQQAbH.js";import"./index-BRrv4Ip6.js";import"./index-Bp3RETpT.js";import"./styleChecker-DfAMPleG.js";import"./eagerComputed-DIhAf9GU.js";import"./useState-DblkWJ1i.js";import"./pickAttrs-DQvtcfDv.js";import"./index-CEnhULtM.js";import"./index-Bh7qAkTT.js";import"./useBreakpoint-CpQcD87b.js";import"./responsiveObserve-ChmocN4c.js";import"./useMergedState-DA2nm7bB.js";import"./index-DQufTizB.js";import"./index-BUzwvh4O.js";import"./List-163jSJPW.js";import"./createRef-CUnV3TOs.js";import"./debounce-BUZtn0sP.js";import"./hasIn-B69yjgv2.js";import"./index-4yq-Tlp0.js";import"./Col-DruUELZH.js";import"./iconSelect-Cdn1HbRk.js";import"./loading2-0Kz4h52X.js";import"./lodash-buJ1Dk2D.js";import"./isPlainObject-DJIrIqvg.js";import"./index-Dpm5AXGB.js";import"./ActionButton-4KVVUbhX.js";import"./index-D7YtsyTb.js";import"./index-CGXbiuUf.js";import"./isMobile-BbN7I0i_.js";import"./index-CrTOvIq5.js";import"./index-DkgGzfF8.js";import"./useMemo-BMsKZuSN.js";const rt={class:"menu-container flex flex-col"},it={key:0,class:"flex items-center space-x-2"},lt={key:3,style:{cursor:"pointer"}},st=T({name:"sysMenu",__name:"index",setup(mt){const x=B(),e=E({queryForm:{tenantId:void 0,title:"",type:""},tenantList:[],tableData:[],loading:!1}),C=[{title:"菜单名称",dataIndex:"title",key:"title",align:"left"},{title:"类型",dataIndex:"type",key:"type",align:"center"},{title:"路由路径",dataIndex:"path",key:"path",align:"center"},{title:"组件路径",dataIndex:"component",key:"component",align:"center"},{title:"权限标识",dataIndex:"permission",key:"permission",align:"center"},{title:"排序",dataIndex:"orderNo",key:"orderNo",align:"center"},{title:"状态",dataIndex:"status",key:"status",align:"center"},{title:"修改记录",dataIndex:"row",key:"row",align:"center"},{title:"操作",dataIndex:"operation",align:"center",fixed:"right",width:250}],D=i=>{var t;(t=x.value)==null||t.handleOpen(i,"edit")},q=()=>{var t;const i={type:2,isHide:!1,isKeepAlive:!0,isAffix:!1,isIframe:!1,tenantId:void 0,status:1,orderNo:100};i.tenantId=e.queryForm.tenantId,(t=x.value)==null||t.handleOpen({...i},"add")},L=async()=>{e.queryForm={tenantId:e.tenantList[0].value||void 0,title:"",type:""},await c()},c=async()=>{e.loading=!0;const i=Object.assign({},e.queryForm),t=await U({...i});e.tableData=t.data.result;const f=_=>{for(let d=0;d<_.length;d++){const l=_[d];l.key=l.path,Array.isArray(l.children)&&l.children.length>0&&f(l.children),Reflect.has(l,"children")&&l.children.length==0&&Reflect.deleteProperty(l,"children")}};f(e.tableData),e.loading=!1},A=async()=>{const i=await P();e.tenantList=i.data.result,e.queryForm.tenantId=i.data.result[0].value},O=async i=>{await H({id:i.id}),await c(),K("删除成功","success")};return Q(async()=>{await A(),await c()}),(i,t)=>{const f=Y,_=X,d=at,l=Z,w=W,g=tt,b=et,M=ot;return r(),p("div",rt,[n(w,{class:"mb-2.5"},{default:o(()=>[n(N,{model:e.queryForm,name:"menu-form",onQuery:c,onAdd:q,onReset:L},{default:o(()=>[n(d,{label:"租户",name:"tenantId",style:{width:"250px"}},{default:o(()=>[n(_,{value:e.queryForm.tenantId,"onUpdate:value":t[0]||(t[0]=a=>e.queryForm.tenantId=a),placeholder:""},{default:o(()=>[(r(!0),p(v,null,F(e.tenantList,a=>(r(),u(f,{key:a.value,value:a.value},{default:o(()=>[s(I(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(d,{label:"菜单名称",name:"title",class:"w-1/2.5"},{default:o(()=>[n(l,{value:e.queryForm.title,"onUpdate:value":t[1]||(t[1]=a=>e.queryForm.title=a)},null,8,["value"])]),_:1}),n(d,{label:"类型",name:"type",style:{width:"150px"}},{default:o(()=>[n(_,{value:e.queryForm.type,"onUpdate:value":t[2]||(t[2]=a=>e.queryForm.type=a),placeholder:""},{default:o(()=>[(r(!0),p(v,null,F(k(z)("MenuTypeEnum"),a=>(r(),u(f,{key:a.value,value:a.value},{default:o(()=>[s(I(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),n(w,{class:"flex-1 card-table"},{default:o(()=>[n(R,{columns:C,data:e.tableData,pagination:!1,loading:e.loading},{bodyCell:o(({column:a,text:pt,record:m})=>[a.dataIndex==="title"?(r(),p("div",it,[n(J,{icon:m.icon},null,8,["icon"]),s(" "+I(m.title),1)])):y("",!0),a.dataIndex==="type"?(r(),p(v,{key:1},[m.type===1?(r(),u(g,{key:0,color:"green"},{default:o(()=>t[3]||(t[3]=[s("目录")])),_:1})):m.type===2?(r(),u(g,{key:1,color:"cyan"},{default:o(()=>t[4]||(t[4]=[s("菜单")])),_:1})):m.type===3?(r(),u(g,{key:2,color:"blue"},{default:o(()=>t[5]||(t[5]=[s("按钮")])),_:1})):y("",!0)],64)):y("",!0),a.dataIndex==="status"?(r(),p(v,{key:2},[m.status===1?(r(),u(g,{key:0,color:"green"},{default:o(()=>t[6]||(t[6]=[s("启用")])),_:1})):(r(),u(g,{key:1,color:"red"},{default:o(()=>t[7]||(t[7]=[s("停用")])),_:1}))],64)):y("",!0),a.dataIndex==="row"?(r(),p("div",lt,[n($,{row:m},null,8,["row"])])):y("",!0),a.dataIndex==="operation"?(r(),p(v,{key:4},[n(b,{icon:h(k(V)),type:"primary",ghost:"",class:"mr-1",onClick:S=>D(m)},{default:o(()=>t[8]||(t[8]=[s("编辑")])),_:2},1032,["icon","onClick"]),n(M,{title:"确定删除?",onConfirm:S=>O(m)},{default:o(()=>[n(b,{icon:h(k(G)),danger:""},{default:o(()=>t[9]||(t[9]=[s("删除")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])],64)):y("",!0)]),_:1},8,["data","loading"])]),_:1}),n(j,{ref_key:"editOrAddDialogRef",ref:x,menuList:e.tableData,onHandleQuery:c},null,8,["menuList"])])}}}),Ce=nt(st,[["__scopeId","data-v-22aa4972"]]);export{Ce as default};
