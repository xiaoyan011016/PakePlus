import{u as I}from"./useGetDictList-Ce8qcgxG.js";import{d as R,i as v,r as F,c as S,e as a,w as o,cE as P,f as p,F as q,D as B,q as E,g as T,p as u,x as V,I as J}from"./index-BGwiQ_ZP.js";import{l as L}from"./lodash-buJ1Dk2D.js";import{a as Q,b as X}from"./sysOrg-CYUW6V7f.js";import{M as Y}from"./index-Dpm5AXGB.js";import{F as $,_ as j}from"./index-C3-0t2lO.js";import{I as z,_ as G}from"./index-BwLVAfvf.js";import{S as H,a as K}from"./index-CKmLu0Sy.js";import{_ as W,R as Z}from"./index-DQufTizB.js";import{_ as ee,a as ae}from"./index-4yq-Tlp0.js";import{_ as te}from"./index-D7YtsyTb.js";import{_ as oe}from"./index-CrTOvIq5.js";const ve=R({__name:"editOrg",props:{orgData:{}},emits:["handleQuery"],setup(x,{expose:w,emit:b}){const y=b,i=x,m=v(),h=v(),e=F({isShow:!1,formState:{},orgData:[]}),D=async()=>{var t;await((t=m.value)==null?void 0:t.validate());const n=L.cloneDeep(e.formState);Array.isArray(e.formState.pid)&&e.formState.pid.length>0&&(n.pid=e.formState.pid[e.formState.pid.length-1]),e.formState.id!=null&&e.formState.id>0?await Q(n):await X(n),J("操作成功","success"),y("handleQuery"),f()},f=()=>{e.isShow=!1,e.formState={},e.orgData=[]};return w({handleOpen:n=>{var t;e.orgData=(n.tenantId?i.orgData.filter(d=>d.tenantId==n.tenantId):i.orgData)??[],e.formState=JSON.parse(JSON.stringify(n)),e.formState.pid=P(e.orgData,n.pid),e.isShow=!0,(t=m.value)==null||t.clearValidate()}}),(n,t)=>{const d=te,r=j,s=ae,_=z,c=oe,k=K,O=H,g=Z,U=W,N=G,C=ee,M=$,A=Y;return p(),S("div",{class:"edit-org-modal",ref_key:"editAddModal",ref:h},[a(A,{open:e.isShow,"onUpdate:open":t[8]||(t[8]=l=>e.isShow=l),width:"700px",wrapClassName:"custom-modal",bodyStyle:{height:"500px",overflowY:"overlay",overflowX:"hidden",paddingRight:"6px"},title:e.formState.id!=null&&e.formState.id>0?"编辑机构":"添加机构",cancelText:"取消",okText:"确定",getContainer:()=>n.$refs.editAddModal,onOk:D,onCancel:f},{default:o(()=>[a(M,{ref_key:"formRef",ref:m,model:e.formState,name:"org-edit-form",autocomplete:"off","label-col":{span:6},"wrapper-col":{span:18}},{default:o(()=>[a(C,null,{default:o(()=>[a(s,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[a(r,{label:"上级机构",name:"pid","label-col":{span:3},"wrapper-col":{span:21}},{default:o(()=>[a(d,{value:e.formState.pid,"onUpdate:value":t[0]||(t[0]=l=>e.formState.pid=l),options:e.orgData,placeholder:"请选择上级机构","field-names":{label:"name",value:"id",children:"children"},"show-search":!0,"change-on-select":!0},null,8,["value","options"])]),_:1})]),_:1}),a(s,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[a(r,{label:"机构名称",name:"name","label-col":{span:3},"wrapper-col":{span:21},rules:[{required:!0,message:"机构名称不能为空",trigger:"blur"}]},{default:o(()=>[a(_,{value:e.formState.name,"onUpdate:value":t[1]||(t[1]=l=>e.formState.name=l),placeholder:"机构名称","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[a(r,{label:"机构编码",name:"code",rules:[{required:!0,message:"机构编码不能为空",trigger:"blur"}]},{default:o(()=>[a(_,{value:e.formState.code,"onUpdate:value":t[2]||(t[2]=l=>e.formState.code=l),placeholder:"机构编码","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[a(r,{label:"级别",name:"level"},{default:o(()=>[a(c,{value:e.formState.level,"onUpdate:value":t[3]||(t[3]=l=>e.formState.level=l),placeholder:"级别",class:"w-full"},null,8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[a(r,{label:"机构类型",name:"type","label-col":{span:3},"wrapper-col":{span:21}},{default:o(()=>[a(O,{value:e.formState.type,"onUpdate:value":t[4]||(t[4]=l=>e.formState.type=l),placeholder:"请选择机构类型","allow-clear":"","show-search":""},{default:o(()=>[(p(!0),S(q,null,B(E(I)("org_type"),l=>(p(),T(k,{key:l.value,value:l.value},{default:o(()=>[u(V(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[a(r,{label:"排序",name:"orderNo"},{default:o(()=>[a(c,{value:e.formState.orderNo,"onUpdate:value":t[5]||(t[5]=l=>e.formState.orderNo=l),placeholder:"排序",class:"w-full"},null,8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[a(r,{label:"状态",name:"status"},{default:o(()=>[a(U,{value:e.formState.status,"onUpdate:value":t[6]||(t[6]=l=>e.formState.status=l)},{default:o(()=>[a(g,{value:1},{default:o(()=>t[9]||(t[9]=[u("启用")])),_:1}),a(g,{value:2},{default:o(()=>t[10]||(t[10]=[u("禁用")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(s,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[a(r,{label:"备注",name:"remark","label-col":{span:3},"wrapper-col":{span:21}},{default:o(()=>[a(N,{value:e.formState.remark,"onUpdate:value":t[7]||(t[7]=l=>e.formState.remark=l),placeholder:"请输入备注内容",rows:2,"allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","getContainer"])],512)}}});export{ve as _};
